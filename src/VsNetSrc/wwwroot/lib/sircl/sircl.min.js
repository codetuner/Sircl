function $$(n,t){rbLoaderExtensions.push([n,t])}var __rb={},rbLoaderExtensions;String.prototype.endsWith||(String.prototype.endsWith=function(n){return this.indexOf(n,this.length-n.length)!==-1});jQuery.fn.extend({closestAttr:function(n){var t=this.closest("*["+n+"]");return t.length>0?t.attr(n):undefined},target:function(){var t=this.closest("*[target]"),n;return t?(n=t.attr("target"),n==""?"_self":n):null},inlineTarget:function(){var t=this.closest("*[inline-target]"),n;return t.length>0?(n=t.attr("inline-target"),n==""?[]:$(n)):this.closest(".inline-target")}});__rb.load=$.fn.load;$.fn.load=function(n,t,i){return typeof n!="string"?__rb.load.apply(this,[n,t,function(n,t,r){status!="error"&&$(this).loaded();i&&i(n,t,r)}]):__rb.load.apply(this,arguments)};__rb.get=function(n,t,i,r){var o=$(t),f=o.attr("href"),l=t.tagName,e,h;if(f===""||f==="null"){n.preventDefault();n.stopPropagation();return}if(f==="history:back"){window.history.back();n.preventDefault();n.stopPropagation();return}if(f==="location:reload"){location.reload();n.preventDefault();n.stopPropagation();return}if(f.indexOf("alert:")==0){alert(f.substr(6));n.preventDefault();n.stopPropagation();return}var s=o.target(),u=o.inlineTarget()[0],a=(o.attr("inline-cached")||"false").toLowerCase()=="true",c=(o.attr("history")||"push").toLowerCase();if(s!==undefined||u===undefined){if(l=="A")return;if(s){window.open(f,s);n.preventDefault();return}window.location=f;n.preventDefault();return}e=null;h=__rb.getDialog(u);h.length>0&&!h.is(".show")&&(o.removeClass("show"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove(),__rb.openDialog(u));a&&($(".contextmenu").css("display","none"),e==null&&(e=$(u).attr("id")||(new Date).getTime(),$(u).attr("id",e)),window.history.replaceState({inlineRestore:!0,inlineTarget:"#"+e,inlineHtml:$(u).html()},document.title,window.location.href));$(document.body).addClass("load-in-progress");__rb.hide($(".load-in-progress-hide"),!0);__rb.hide($(".load-in-progress-show"),!1);$.ajax({url:f,cache:!1,data:null,method:"GET",statusCode:{200:function(r){i&&i(n,t);c=="push"?(__rb.referrer=window.location.href.split("#")[0],window.history.pushState(null,document.title,f)):c=="set"&&(__rb.referrer=window.location.href.split("#")[0],window.history.replaceState(null,document.title,f));r.indexOf("#FULL_PAGE#")>-1?(document.open(),document.write(r),document.close()):(e==null&&(e=$(u).attr("id")||(new Date).getTime(),$(u).attr("id",e)),$(u).html(r),$(u).find("*[inline-target=local]").each(function(){$(this).attr("inline-target","#"+e)}),$(u).loaded())},202:function(t,r,u){i&&i(n,triggerElement);var f=u.getResponseHeader("Location");f&&(window.location=f)},204:function(t,r,f){i&&i(n,triggerElement);$(u).html("");__rb.closeDialog(u);var e=f.getResponseHeader("Location");e&&(window.location=e)},205:function(){},complete:function(){$(document.body).removeClass("load-in-progress");__rb.hide($(".load-in-progress-hide"),!1);__rb.hide($(".load-in-progress-show"),!0)},error:function(i,u,f){r?r(n,t,i,u,f):alert(error)}}})};__rb.html_spinner='<i class="fas fa-circle-notch fa-spin"><\/i> ';__rb.hideByClass=function(n,t){t?n.addClass("hidden"):n.removeClass("hidden")};__rb.hideByJquery=function(n,t){t?n.hide(0):n.show(0)};__rb.hideByAttribute=function(n,t){t?n.attr("hidden",!0):n.attr("hidden",!1)};__rb.hide=__rb.hideByClass;__rb.getDialog=function(n){return $(n).closest(".modal")};__rb.closeDialog=function(n){var t=__rb.getDialog(n);t.length&&t.modal("hide")};__rb.openDialog=function(n){var t=__rb.getDialog(n);t.length&&t.modal("show")};__rb.referrer=document.referrer;__rb.submitInline=function(n,t,i,r,u,f,e,o,s,h,c){var l,a;if(e)l=null,o&&($(".contextmenu").css("display","none"),l==null&&(l=$(e).attr("id")||(new Date).getTime(),$(e).attr("id",l)),window.history.replaceState({inlineRestore:!0,inlineTarget:"#"+l,inlineHtml:$(e).html()},document.title,window.location.href)),n!=null&&n.target.dataset.dismiss=="modal"&&($("body").removeClass("modal-open"),$(".modal-backdrop").remove()),a=i==null?"":i.serialize?i.serialize():jQuery.param(i),r=="GET"&&(u=u.indexOf("?")>=0?u+"&"+a:u+"?"+a),$(document.body).addClass("load-in-progress"),__rb.hide($(".load-in-progress-hide"),!0),__rb.hide($(".load-in-progress-show"),!1),$.ajax({url:u,cache:!1,data:r=="GET"?null:a,method:r,statusCode:{200:function(i){h&&h(n,t);s=="push"?(__rb.referrer=window.location.href.split("#")[0],window.history.pushState(null,document.title,u)):s=="set"&&(__rb.referrer=window.location.href.split("#")[0],window.history.replaceState(null,document.title,u));i.indexOf("#FULL_PAGE#")>-1?(document.open(),document.write(i),document.close()):(l==null&&(l=$(e).attr("id")||(new Date).getTime(),$(e).attr("id",l)),$(e).html(i),$(e).find("*[inline-target=local]").each(function(){$(this).attr("inline-target","#"+l)}),$(e).loaded(),__rb.openDialog(e))},202:function(i,r,u){h&&h(n,t);var f=u.getResponseHeader("Location");f&&(window.location=f)},204:function(i,r,u){h&&h(n,t);$(e).html("");__rb.closeDialog(e);var f=u.getResponseHeader("Location");f&&(window.location=f)},205:function(i,r,u){h&&h(n,t);var f=u.getResponseHeader("Location")||window.location.href.split("#")[0];window.history.replaceState(null,document.title,f);window.location.href=f}},complete:function(){$(document.body).removeClass("load-in-progress");__rb.hide($(".load-in-progress-hide"),!1);__rb.hide($(".load-in-progress-show"),!0)},error:function(i){if($(document.body).removeClass("load-in-progress"),__rb.hide($(".load-in-progress-hide"),!1),__rb.hide($(".load-in-progress-show"),!0),c)c(n,t);else{i.responseText==undefined?alert(i.statusText):i.responseText.indexOf("#FULL_PAGE#")>-1?(document.open(),document.write(i.responseText),document.close()):($(e).html("<div>"+i.responseText+"<\/div>"),__rb.openDialog(e));throw"Error "+i.status+" - "+i.statusText;}}}),n.preventDefault();else if(form!=null)form.submit();else{if(f){window.open(u,f);n.preventDefault();return}window.location=u;n.preventDefault();return}};__rb.markFormChanged=function(n){if(n!=null){var i=n.attr("onchange-set"),t=n.find("INPUT[name='"+i+"']");t.length>0&&$(t).each(function(n,t){$(t).attr("type")=="checkbox"?$(t).prop("checked",!0):$(t).val("true")});n.addClass("form-changed")}};$(document).ready(function(){$(document.body).children().on("click","*[confirm-message]",function(n){var t=$(this).attr("confirm-message");t&&(confirm(t)||(n.stopPropagation(),n.preventDefault()))});$(document.body).on("click","*[href]",function(n){var f=$(this)[0].tagName,t=$(this).attr("href");if(t=="null"||t==""){n.preventDefault();n.stopPropagation();return}if(t=="history:back"){window.history.back();n.preventDefault();n.stopPropagation();return}if(t=="location:reload"){location.reload();n.preventDefault();n.stopPropagation();return}if(t.indexOf("alert:")==0){alert(t.substr(6));n.preventDefault();n.stopPropagation();return}var i=$(this).target(),r=$(this).inlineTarget()[0],e=($(this).attr("inline-cached")||"false").toLowerCase()=="true",u=($(this).attr("history")||"default").toLowerCase();if(r){__rb.openDialog(r);__rb.submitInline(n,$(this),null,"GET",t,i,r,e,u);return}if(u=="set"&&window.history.replaceState(null,document.title,t),f!="A"){if(i){window.open(t,i);n.preventDefault();return}window.location=t;n.preventDefault();return}});$(document.body).on("click","FORM BUTTON:submit",function(n){var t=$(this).closest("form"),r=(t.attr("method")||"GET").toUpperCase(),u=$(this).attr("formaction")||t.attr("action")||"",f=$(this).target(),i=$(this).inlineTarget()[0],e=($(this).attr("history")||"default").toLowerCase();i&&(__rb.markFormChanged(t),__rb.submitInline(n,$(this),t,r,u,f,i,!1,e))});$(document.body).on("submit","FORM",function(n){var t=$(this).closest("form"),f=(t.attr("method")||"GET").toUpperCase(),i=t.attr("action")||"",e=$(this).target(),r=$(this).inlineTarget()[0],o=($(this).attr("inline-cached")||"false").toLowerCase()=="true",u=($(this).attr("history")||"default").toLowerCase();if(r){__rb.submitInline(n,$(this),t,f,i,e,r,o,u);return}u=="set"&&window.history.replaceState(null,document.title,i);return});window.onpopstate=function(n){n.state!=null&&n.state.inlineRestore==!0?($(n.state.inlineTarget).html(n.state.inlineHtml),$(n.state.inlineTarget).loaded()):n.state==null&&window.history.go()};$(document.body).on("click","BUTTON",function(){if($(this).is(":submit")){var n=$(this).closest("FORM")[0];if(n&&!n.checkValidity())return}$(this).find(".spinner").replaceWith(__rb.html_spinner)});$(document.body).on("click","FORM[inline-target] BUTTON[type=submit][formaction]",function(n){var t=$(this).closest("FORM");t.attr("action",$(this).attr("formaction"));t.submit();n.preventDefault()});$(document.body).on("click","*[forward-click]",function(n){var t=$(this).attr("forward-click");t!="off"&&$(t)[0].click();n.preventDefault()});$(document.body).on("keydown","FORM[default-submit-button]",function(n){var t;n.keyCode==13?(t=$(this).find($(this).attr("default-submit-button"))[0],t!=null&&t.click(),n.preventDefault()):n.keyCode==27&&(t=$(this).find($(this).attr("default-cancel-button"))[0],t!=null&&t.click(),n.preventDefault())});$(window).on("beforeunload",function(){__rb.hide($(".load-in-progress-show"),!1);__rb.hide($(".load-in-progress-hide"),!0)});$(document.body).loaded()});rbLoaderExtensions=[];jQuery.fn.extend({loaded:function(){$(this).find("*[moveto]").each(function(){$($(this).attr("moveto")).html($(this).html());$($(this).attr("moveto")).loaded();$(this).html("")});$(this).find(".showafterload").removeClass("hidden");$(this).find(".hideafterload").addClass("hidden");__rb.hide($(".load-in-progress-show"),!0);__rb.hide($(".load-in-progress-hide"),!1);$(this).find("*[autoload-url]").each(function(){var n=$(this).attr("autoload-url")+"",t=$(this).attr("autoload-refresh"),i=$(this);i.load(n.replace("{rnd}",Math.random()),function(){$(this).loaded()});t&&window.setInterval(function(){i.load(n.replace("{rnd}",Math.random()),function(){$(this).loaded()})},t*1e3)});$(this).find("*[autofocus]:first").each(function(){var n=$(this)[0];n.focus();try{n.select()}catch(t){}});$(this).find("SELECT[autoinit]").each(function(){var r,t,i,u,n;if($(this).val()=="")if(r=$(this).attr("autoinit")+"",t=$("option",this),r.toLowerCase()=="singleton"){for(i=-1,n=0;n<t.length;n++)if(t[n].value!=""&&i==-1)i=n;else if(t[n].value!="")return;i!=-1&&$(this).val(t[i].value)}else if(r.toLowerCase()=="first"){for(u=-1,n=0;n<t.length;n++)if(t[n].value!=""){$(this).val(t[n].value);break}}else $(this).val(r)});$(this).find("a.back").each(function(){__rb.referrer.endsWith($(this).attr("href"))&&$(this).attr("href","history:back")});var n=$(this);$.each(rbLoaderExtensions,function(t,i){var r=null;i.length>1&&(r=i[1]);i[0](n,r)})}});
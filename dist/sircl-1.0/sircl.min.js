var __rb={},rbLoaderExtensions;__rb.html_spinner='<i class="fas fa-circle-notch fa-spin"><\/i> ';__rb.hideByClass=function(n,t){t?n.addClass("hidden"):n.removeClass("hidden")};__rb.hideByJquery=function(n,t){t?n.hide(0):n.show(0)};__rb.hideByAttribute=function(n,t){t?n.attr("hidden",!0):n.attr("hidden",!1)};__rb.hide=__rb.hideByClass;__rb.getDialog=function(n){return $(n).closest(".modal")};__rb.closeDialog=function(n){var t=__rb.getDialog(n);t.length&&t.modal("hide")};__rb.openDialog=function(n){var t=__rb.getDialog(n);t.length&&t.modal("show")};__rb.submitInline=function(n,t,i,r,u,f,e,o,s){if(e){o&&($(".contextmenu").css("display","none"),window.history.replaceState({inlineRestore:!0,inlineTarget:e,inlineHtml:$(e).html()},document.title,window.location.href));n!=null&&n.target.dataset.dismiss=="modal"&&($("body").removeClass("modal-open"),$(".modal-backdrop").remove());var h=i==null?"":i.serialize?i.serialize():jQuery.param(i);r=="GET"&&(u=u.indexOf("?")>=0?u+"&"+h:u+"?"+h);$(document.body).addClass("load-in-progress");__rb.hide($(".load-in-progress-hide"),!0);__rb.hide($(".load-in-progress-show"),!1);$.ajax({url:u,cache:!1,data:r=="GET"?null:h,method:r,statusCode:{200:function(n){s=="push"?window.history.pushState(null,document.title,u):s=="set"&&window.history.replaceState(null,document.title,u);n.indexOf("#FULL_PAGE#")>-1?(document.open(),document.write(n),document.close()):($(e).html(n),$(e).find("*[inline-target=local]").each(function(){$(this).attr("inline-target",e)}),$(e).loaded(),__rb.openDialog(e))},202:function(n,t,i){var r=i.getResponseHeader("Location");r&&(window.location=r)},204:function(n,t,i){$(e).html("");__rb.closeDialog(e);var r=i.getResponseHeader("Location");r&&(window.location=r)},205:function(n,t,i){var r=i.getResponseHeader("Location")||window.location.href;window.history.replaceState(null,document.title,r);window.location.href=r}},complete:function(){$(document.body).removeClass("load-in-progress");__rb.hide($(".load-in-progress-hide"),!1);__rb.hide($(".load-in-progress-show"),!0)},error:function(n){$(document.body).removeClass("load-in-progress");__rb.hide($(".load-in-progress-hide"),!1);__rb.hide($(".load-in-progress-show"),!0);n.responseText.indexOf("#FULL_PAGE#")>-1?(document.open(),document.write(n.responseText),document.close()):($(e).html("<div>"+n.responseText+"<\/div>"),__rb.openDialog(e));throw"Error "+n.status+" - "+n.statusText;}});n.preventDefault()}else if(form!=null)form.submit();else{if(f){window.open(u,f);n.preventDefault();return}window.location=u;n.preventDefault();return}};__rb.markFormChanged=function(n){if(n!=null){var i=n.attr("onchange-set"),t=n.find("INPUT[name='"+i+"']");t.length>0&&$(t).each(function(n,t){$(t).attr("type")=="checkbox"?$(t).prop("checked",!0):$(t).val("true")});n.addClass("form-changed")}};$(document).ready(function(){$(document.body).children().on("click","*[confirm-message]",function(n){var t=$(this).attr("confirm-message");t&&(confirm(t)||(n.stopPropagation(),n.preventDefault()))});$(document.body).on("click","*[href]",function(n){var f=$(this)[0].tagName,t=$(this).attr("href");if(t=="null"||t==""){n.preventDefault();n.stopPropagation();return}if(t=="history:back"){window.history.back();n.preventDefault();n.stopPropagation();return}if(t=="location:reload"){location.reload();n.preventDefault();n.stopPropagation();return}if(t.indexOf("alert:")==0){alert(t.substr(6));n.preventDefault();n.stopPropagation();return}var i=$(this).attr("target"),r=$(this).attr("inline-target"),e=($(this).attr("inline-cached")||"false").toLowerCase()=="true",u=($(this).attr("history")||"default").toLowerCase();if(r){__rb.openDialog(r);__rb.submitInline(n,$(this),null,"GET",t,i,r,e,u);return}if(u=="set"&&window.history.replaceState(null,document.title,t),f!="A"){if(i){window.open(t,i);n.preventDefault();return}window.location=t;n.preventDefault();return}});$(document.body).on("click","FORM BUTTON[type=submit][inline-target]",function(n){var t=$(this).closest("form"),i=(t.attr("method")||"GET").toUpperCase(),r=$(this).attr("formaction")||t.attr("action")||"",u=$(this).attr("inline-target");__rb.markFormChanged(t);__rb.submitInline(n,$(this),t,i,r,null,u,!1,null);return});$(document.body).on("submit","FORM",function(n){var t=$(this).closest("form"),f=(t.attr("method")||"GET").toUpperCase(),i=t.attr("action")||"",r=$(this).attr("inline-target"),e=($(this).attr("inline-cached")||"false").toLowerCase()=="true",u=($(this).attr("history")||"default").toLowerCase();if(r){__rb.submitInline(n,$(this),t,f,i,null,r,e,u);return}u=="set"&&window.history.replaceState(null,document.title,i);return});window.onpopstate=function(n){n.state!=null&&n.state.inlineRestore==!0?($(n.state.inlineTarget).html(n.state.inlineHtml),$(n.state.inlineTarget).loaded()):n.state==null&&(window.location=window.location)};$(document.body).on("click","BUTTON",function(){$(this).find(".spinner").replaceWith(__rb.html_spinner)});$(document.body).on("click","FORM[inline-target] BUTTON[type=submit][formaction]",function(n){var t=$(this).closest("FORM");t.attr("action",$(this).attr("formaction"));t.submit();n.preventDefault()});$(document.body).on("click","*[forward-click]",function(n){var t=$(this).attr("forward-click");t!="off"&&$(t)[0].click();n.preventDefault()});$(document.body).on("keydown","FORM[default-submit-button]",function(n){var t;n.keyCode==13?(t=$(this).find($(this).attr("default-submit-button"))[0],t!=null&&t.click(),n.preventDefault()):n.keyCode==27&&(t=$(this).find($(this).attr("default-cancel-button"))[0],t!=null&&t.click(),n.preventDefault())});$(window).on("beforeunload",function(){__rb.hide($(".load-in-progress-show"),!1);__rb.hide($(".load-in-progress-hide"),!0)});$(document.body).loaded()});rbLoaderExtensions=[];jQuery.fn.extend({loaded:function(){$(this).find("*[moveto]").each(function(){$($(this).attr("moveto")).html($(this).html());$($(this).attr("moveto")).loaded();$(this).html("")});$(this).find(".showafterload").removeClass("hidden");$(this).find(".hideafterload").addClass("hidden");__rb.hide($(".load-in-progress-show"),!0);__rb.hide($(".load-in-progress-hide"),!1);$(this).find("*[autoload-url]").each(function(){var n=$(this).attr("autoload-url")+"",t=$(this).attr("autoload-refresh"),i=$(this);i.load(n.replace("{rnd}",Math.random()),function(){$(this).loaded()});t&&window.setInterval(function(){i.load(n.replace("{rnd}",Math.random()),function(){$(this).loaded()})},t*1e3)});$(this).find("*[autofocus]:first").each(function(){$(this)[0].focus();$(this)[0].select()});$(this).find("SELECT[autoinit]").each(function(){var r,t,i,u,n;if($(this).val()=="")if(r=$(this).attr("autoinit")+"",t=$("option",this),r.toLowerCase()=="singleton"){for(i=-1,n=0;n<t.length;n++)if(t[n].value!=""&&i==-1)i=n;else if(t[n].value!="")return;i!=-1&&$(this).val(t[i].value)}else if(r.toLowerCase()=="first"){for(u=-1,n=0;n<t.length;n++)if(t[n].value!=""){$(this).val(t[n].value);break}}else $(this).val(r)});var n=$(this);$.each(rbLoaderExtensions,function(t,i){var r=null;i.length>1&&(r=i[1]);i[0](n,r)})}});